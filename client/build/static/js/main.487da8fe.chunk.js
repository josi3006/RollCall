(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{35:function(e,t,a){e.exports=a(60)},40:function(e,t,a){},41:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(32),s=a.n(r),l=a(7),i=a(8),o=a(10),m=a(9),u=a(11),h=a(27),d=a(16),p=a(14);a(40);var v=function(){return c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col 12 center"},c.a.createElement("img",{src:"/rollcalllogosquare-min.png",alt:"Roll Call logo",id:"squarelogo"})))},b=(a(41),function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"home"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col s12 center-align"},c.a.createElement(v,null),c.a.createElement("section",null,c.a.createElement("div",null,c.a.createElement("div",{className:"buttoncontainer"},c.a.createElement("div",null,c.a.createElement(p.b,{className:"transparent btn center-align waves-effect waves-light",to:"/login"},"Login to Your Account"))))),c.a.createElement("p",null,c.a.createElement("small",null,"\xa9 Sadovszky & Sims 2020")))))}}]),t}(n.Component)),f=a(4),E=a.n(f),g=a(15),N=a(2),y=a(21),w=a.n(y);a(48),a(50);w.a.initializeApp({apiKey:"AIzaSyBzWwY3nXxhihFNMznYh2QTY9KP05IgVpQ",authDomain:"roll-call-d0ece.firebaseapp.com",databaseURL:"https://roll-call-d0ece.firebaseio.com",projectId:"roll-call-d0ece",storageBucket:"roll-call-d0ece.appspot.com",messagingSenderId:"940633529266",appId:"1:940633529266:web:1fa21a8d8a0c1b559ce2ab",measurementId:"G-MXHD39YCCQ"});var j=w.a.auth,O=w.a.database();var S=function(){return c.a.createElement("footer",null,c.a.createElement("div",{className:"footer-copyright"},c.a.createElement("p",null,c.a.createElement("small",null,"\xa9 Sadovszky & Sims 2020"))),c.a.createElement("button",{className:"btn btn-primary mr-3",onClick:function(){return j().signOut()}},"Logout"))};a(53);var C=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("nav",{className:"nav transparent z-depth-0"},c.a.createElement("div",{class:"row"},c.a.createElement("div",{className:"col s12"}),c.a.createElement("img",{src:"/rollcalllogohorizontal-min.png",alt:"Roll Call",className:"navlogo responsive-img"})),c.a.createElement("div",{className:"nav transparent z-depth-0"},c.a.createElement("ul",{id:"nav-mobile",className:"center hide-on-med-and-down "},c.a.createElement("div",{className:"buttoncontainer"},c.a.createElement("li",null,c.a.createElement("a",{className:"transparent z-depth-0 waves-effect waves-light btn"},"Add a Student"," ",c.a.createElement("i",{className:"material-icons icon-creamyyy right"},"add")),c.a.createElement("a",{className:"transparent z-depth-0 waves-effect waves-light btn"},"Move Class"," ",c.a.createElement("i",{className:"material-icons icon-creamyyy right"},"contact_mail")),c.a.createElement(p.b,{className:"transparent z-depth-0 waves-effect waves-light btn",to:"/chat"},"Chat",c.a.createElement("i",{className:"material-icons icon-creamyyy right"},"question_answer")),c.a.createElement("a",{className:"transparent z-depth-0 waves-effect waves-light btn"},"Contact Parents"," ",c.a.createElement("i",{class:"material-icons icon-creamyyy right"},"move_to_inbox")),c.a.createElement("a",{className:"transparent z-depth-0 waves-effect waves-light btn"},"Teachers"," ",c.a.createElement("i",{className:"material-icons icon-creamyyy right"},"perm_contact_calendar"))))))))},k=(a(54),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={user:j().currentUser,chats:[],content:"",readError:null,writeError:null,loadingChats:!1},a.handleChange=a.handleChange.bind(Object(N.a)(Object(N.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(N.a)(Object(N.a)(a))),a.myRef=c.a.createRef(),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object(g.a)(E.a.mark(function e(){var t,a=this;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({readError:null,loadingChats:!0}),t=this.myRef.current;try{O.ref("chats").on("value",function(e){var n=[];e.forEach(function(e){n.push(e.val())}),n.sort(function(e,t){return t.timestamp-e.timestamp}),a.setState({chats:n}),t.scrollBy(0,t.scrollHeight),a.setState({loadingChats:!1})})}catch(n){this.setState({readError:n.message,loadingChats:!1})}case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){this.setState({content:e.target.value})}},{key:"handleSubmit",value:function(){var e=Object(g.a)(E.a.mark(function e(t){var a;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({writeError:null}),a=this.myRef.current,e.prev=3,e.next=6,O.ref("chats").push({content:this.state.content,timestamp:Date.now(),uid:this.state.user.uid});case 6:this.setState({content:""}),a.scrollBy(0,a.scrollHeight),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),this.setState({writeError:e.t0.message});case 13:case"end":return e.stop()}},e,this,[[3,10]])}));return function(t){return e.apply(this,arguments)}}()},{key:"formatTime",value:function(e){var t=new Date(e);return"".concat(t.getMonth(),"/").concat(t.getDate()+1,"/").concat(t.getFullYear()," ").concat(t.getHours(),":").concat(t.getMinutes())}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"container"},c.a.createElement(C,null),c.a.createElement("div",{className:"chat-area",ref:this.myRef},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col s2"}),c.a.createElement("div",{className:"col s8"},this.state.loadingChats?c.a.createElement("div",{className:"spinner-border text-success",role:"status"},c.a.createElement("span",{className:"sr-only"},"Loading...")):"",c.a.createElement("form",{onSubmit:this.handleSubmit,className:"mx-3"},c.a.createElement("div",{className:"section"},c.a.createElement("textarea",{className:"form-control",name:"content",onChange:this.handleChange,value:this.state.content}),this.state.error?c.a.createElement("p",{className:"text-danger"},this.state.error):null),c.a.createElement("div",{className:"section"},c.a.createElement("button",{type:"submit",className:"transparent z-depth-1 waves-effect waves-light btn"},c.a.createElement("i",{className:"material-icons icon-creamyyy right"},"send"),"Send"))),this.state.chats.map(function(t){return c.a.createElement("p",{key:t.timestamp,className:"chat-bubble "+(e.state.user.uid===t.uid?"current-user":"")},t.content,c.a.createElement("br",null),c.a.createElement("span",{className:"chat-time float-right"},c.a.createElement("small",null,e.formatTime(t.timestamp))))})),c.a.createElement("div",{className:"col s2"}))),c.a.createElement("div",null,"Logged in as: ",c.a.createElement("strong",{className:"text-info"},this.state.user.email)),c.a.createElement(S,null))}}]),t}(n.Component)),x=a(20);function I(){var e=new j.GoogleAuthProvider;return j().signInWithPopup(e)}function z(){var e=new j.GithubAuthProvider;return j().signInWithPopup(e)}var A=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(o.a)(this,Object(m.a)(t).call(this))).state={error:null,email:"",password:""},e.handleChange=e.handleChange.bind(Object(N.a)(Object(N.a)(e))),e.handleSubmit=e.handleSubmit.bind(Object(N.a)(Object(N.a)(e))),e.googleSignIn=e.googleSignIn.bind(Object(N.a)(Object(N.a)(e))),e.githubSignIn=e.githubSignIn.bind(Object(N.a)(Object(N.a)(e))),e}return Object(u.a)(t,e),Object(i.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(x.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(){var e=Object(g.a)(E.a.mark(function e(t){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({error:""}),e.prev=2,e.next=5,a=this.state.email,n=this.state.password,j().createUserWithEmailAndPassword(a,n);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),this.setState({error:e.t0.message});case 10:case"end":return e.stop()}var a,n},e,this,[[2,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"googleSignIn",value:function(){var e=Object(g.a)(E.a.mark(function e(){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),this.setState({error:e.t0.message});case 8:case"end":return e.stop()}},e,this,[[0,5]])}));return function(){return e.apply(this,arguments)}}()},{key:"githubSignIn",value:function(){var e=Object(g.a)(E.a.mark(function e(){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z();case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0),this.setState({error:e.t0.message});case 9:case"end":return e.stop()}},e,this,[[0,5]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return c.a.createElement("div",{className:"container"},c.a.createElement("form",{className:"mt-5 py-5 px-5",onSubmit:this.handleSubmit},c.a.createElement("h1",null,"Sign Up to",c.a.createElement(p.b,{className:"title ml-2",to:"/"},"Chatty")),c.a.createElement("p",{className:"lead"},"Fill in the form below to create an account."),c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{className:"form-control",placeholder:"Email",name:"email",type:"email",onChange:this.handleChange,value:this.state.email})),c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{className:"form-control",placeholder:"Password",name:"password",onChange:this.handleChange,value:this.state.password,type:"password"})),c.a.createElement("div",{className:"form-group"},this.state.error?c.a.createElement("p",{className:"text-danger"},this.state.error):null,c.a.createElement("button",{className:"btn btn-primary px-5",type:"submit"},"Sign up")),c.a.createElement("p",null,"You can also sign up with any of these services"),c.a.createElement("button",{className:"btn btn-danger mr-2",type:"button",onClick:this.googleSignIn},"Sign up with Google"),c.a.createElement("button",{className:"btn btn-secondary",type:"button",onClick:this.githubSignIn},"Sign up with GitHub"),c.a.createElement("hr",null),c.a.createElement("p",null,"Already have an account? ",c.a.createElement(p.b,{to:"/login"},"Login"))))}}]),t}(n.Component),L=(a(55),function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(o.a)(this,Object(m.a)(t).call(this))).state={error:null,email:"",password:""},e.handleChange=e.handleChange.bind(Object(N.a)(Object(N.a)(e))),e.handleSubmit=e.handleSubmit.bind(Object(N.a)(Object(N.a)(e))),e}return Object(u.a)(t,e),Object(i.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(x.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(){var e=Object(g.a)(E.a.mark(function e(t){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({error:""}),e.prev=2,e.next=5,a=this.state.email,n=this.state.password,j().signInWithEmailAndPassword(a,n);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),this.setState({error:e.t0.message});case 10:case"end":return e.stop()}var a,n},e,this,[[2,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return c.a.createElement("div",{className:"container"},c.a.createElement("form",{className:"mt-5 py-5 px-5",autoComplete:"off",onSubmit:this.handleSubmit},c.a.createElement(v,null),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col s12"},c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{className:"form-control",placeholder:"Email",name:"email",type:"email",onChange:this.handleChange,value:this.state.email})))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col s12"},c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{className:"form-control",placeholder:"Password",name:"password",onChange:this.handleChange,value:this.state.password,type:"password"})))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col s12"},c.a.createElement("div",{className:"form-group"},this.state.error?c.a.createElement("p",{className:"error-text"},this.state.error):null,c.a.createElement("div",{className:"buttoncontainer"},c.a.createElement("button",{className:"transparent btn waves-effect waves-light",type:"submit"},"Login")))))),c.a.createElement("p",null,c.a.createElement("small",null,"\xa9 Sadovszky & Sims 2020")))}}]),t}(n.Component)),P=a(13),D=(a(56),function(e){var t=e.children,a=e.closeModal;return c.a.createElement("div",{className:"modal-wrapper"},c.a.createElement("div",{className:"modal-body"},c.a.createElement("div",{className:"close",onClick:a},c.a.createElement("i",{className:"material-icons"},"close")),t))}),M=(a(57),function(e){var t=e.students,a=e.refreshStudentList,r=Object(n.useState)(!1),s=Object(P.a)(r,2),l=s[0],i=s[1],o=Object(n.useState)(null),m=Object(P.a)(o,2),u=m[0],h=m[1],d=Object(n.useState)(null),p=Object(P.a)(d,2),v=p[0],b=p[1],f=Object(n.useState)(null),E=Object(P.a)(f,2),g=E[0],N=E[1],y=Object(n.useState)({}),w=Object(P.a)(y,2),S=w[0],C=w[1];Object(n.useEffect)(function(){O.ref("/teachers/").once("value").then(function(e){console.log("teachers",e.val()),C(e.val())})},[]);return c.a.createElement("div",null,c.a.createElement("h1",{className:"classHeader"},"Students"),Object.keys(t).map(function(e){var a=t[e];return c.a.createElement("div",{key:a.id},c.a.createElement("div",{className:"collection-item transparent z-depth-0"},c.a.createElement("div",{className:"studentname"},a.name,c.a.createElement("div",{onClick:function(){return function(e){b(e.name),h(e.id),i(!0)}(a)},className:"secondary-content modal-trigger"},c.a.createElement("i",{className:"material-icons icon-creamyyy"},"more")))))}),l&&c.a.createElement(D,{closeModal:function(){return i(!1)}},c.a.createElement("h4",null,v),c.a.createElement("h6",null,"Assign to Teacher"),c.a.createElement("div",{className:"select-box"},Object.keys(S).map(function(e){return c.a.createElement("div",{onClick:function(){return N(e)},className:"teacher-option ".concat(e===g?"active":null)},S[e].name)})),c.a.createElement("button",{className:"waves-effect waves-light btn",onClick:function(){var e=j().currentUser,t={};t["/teachers/".concat(e,"/students/").concat(u)]=null;var n={id:u,name:v};t["/teachers/".concat(g,"/students/").concat(u)]=n,O.ref().update(t).then(function(){i(!1),a()})}},"Assign to Teacher")))}),R=(a(58),function(){var e=Object(n.useState)({}),t=Object(P.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)(""),l=Object(P.a)(s,2),i=l[0],o=l[1],m=Object(n.useState)(!0),u=Object(P.a)(m,2),h=u[0],d=u[1],p=localStorage.getItem("UR_APP_teacher_id"),v=function(){O.ref("/teachers/".concat(p,"/students/")).once("value").then(function(e){e.val()||console.log("Zach Sadovszky"),r(e.val()),d(!1)})},b=function(e){var t={},a=Date.now();t["teachers/".concat(p,"/students/").concat(a,"/id")]=a,t["teachers/".concat(p,"/students/").concat(a,"/name")]=e,O.ref().update(t).then(function(){v(),o("")})};return Object(n.useEffect)(function(){v()},[]),c.a.createElement(c.a.Fragment,null,c.a.createElement(C,null),c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"center col s3"},c.a.createElement("div",null,c.a.createElement("p",{className:"newStudentHeader"},"Student Check-In:"))),c.a.createElement("div",{className:"col s6"},c.a.createElement("input",{onChange:function(e){return o(e.currentTarget.value)},value:i,id:"newStudentInput"})),c.a.createElement("div",{className:"col s3"},c.a.createElement("div",{className:"center transparent z-depth-0 addStudent col s5",onClick:function(){return b(i)}},c.a.createElement("div",{className:"addbutton"},c.a.createElement("i",{class:"material-icons icon-creamyyy"},"add")))))),c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col s12 studentList "},h?c.a.createElement("div",null,"Loading..."):c.a.createElement(M,{students:a,refreshStudentList:v})))),c.a.createElement(S,null))});a(59);function _(e){var t=e.component,a=e.authenticated,n=Object(h.a)(e,["component","authenticated"]);return c.a.createElement(d.b,Object.assign({},n,{render:function(e){return!0===a?c.a.createElement(t,e):c.a.createElement(d.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}function H(e){var t=e.component,a=e.authenticated,n=Object(h.a)(e,["component","authenticated"]);return c.a.createElement(d.b,Object.assign({},n,{render:function(e){return!1===a?c.a.createElement(t,e):c.a.createElement(d.a,{to:"/dashboard"})}}))}var T=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(o.a)(this,Object(m.a)(t).call(this))).state={authenticated:!1,loading:!0},e}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;j().onAuthStateChanged(function(t){t?e.setState({authenticated:!0,loading:!1}):e.setState({authenticated:!1,loading:!1})})}},{key:"render",value:function(){return!0===this.state.loading?c.a.createElement("div",{className:"spinner-border text-success",role:"status"},c.a.createElement("span",{className:"sr-only"},"Loading...")):c.a.createElement(p.a,null,c.a.createElement(d.d,null,c.a.createElement(d.b,{exact:!0,path:"/",component:b}),c.a.createElement(_,{path:"/dashboard",authenticated:this.state.authenticated,component:R}),c.a.createElement(_,{path:"/chat",authenticated:this.state.authenticated,component:k}),c.a.createElement(H,{path:"/signup",authenticated:this.state.authenticated,component:A}),c.a.createElement(H,{path:"/login",authenticated:this.state.authenticated,component:L})))}}]),t}(n.Component),Y=document.getElementById("root");s.a.render(c.a.createElement(T,null),Y)}},[[35,1,2]]]);
//# sourceMappingURL=main.487da8fe.chunk.js.map